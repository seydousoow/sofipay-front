<div>
  <label [class.sr-only]="noLabel" [for]="id"
         class="mb-2 ml-1 flex items-center text-sm font-medium text-gray-900">
    <span [innerHTML]="label"></span>
    @if (required) {
      <span>&nbsp;*</span>
    }
    @if (!readonly && maxLength) {
      <span class="mr-1 ml-auto text-xs">{{ length }} / {{ maxLength }}</span>
    }
  </label>
  @if (!readonly) {
    @if (inputType === 'phone-number') {
      <div class="relative" [class.mb-1.5]="invalid">
        <div class="pointer-events-none absolute inset-y-0 top-0 flex items-center text-sm start-0 ps-3 gap-x-1.5">
          <horizon-icon name="flag-sn" classes="w-5 h-5"></horizon-icon>
          + 221
        </div>
        <input type="text"
               pattern="[0-9]{2} [0-9]{3} [0-9]{2} [0-9]{2}"
               placeholder="77 123 45 67"
               class="text-xs shadow-md ps-20 disabled:cursor-not-allowed disabled:border-gray-200 disabled:bg-gray-200 disabled:text-gray-900 sm:text-sm"
               (keyup)="updateValue($event)"
               autocomplete="off"
               [disabled]="disabled"
               [id]="id"
               [name]="name || id"
               [ngClass]="classes"
               [value]="formattedPhoneNumber" />
      </div>
    } @else if (inputType === "password") {
      <div class="relative" [class.mb-1.5]="invalid">
        <input
          (keyup)="updateValue($event)"
          [disabled]="disabled"
          [id]="id"
          [name]="name || id"
          [ngClass]="classes"
          [type]="showPassword ? 'text': 'password'"
          [value]="value"
          autocomplete="off"
          class="text-xs shadow-md disabled:cursor-not-allowed disabled:border-gray-200 disabled:bg-gray-200 disabled:text-gray-900 sm:text-sm pe-10"
          placeholder="Mot de passe" />
        <div class="absolute inset-y-0 end-0 flex items-center pe-3.5 cursor-pointer" (click)="showPassword = !showPassword">
          <horizon-icon *ngIf="!showPassword" classes="w-4 h-4 text-gray-600" name="eye"></horizon-icon>
          <horizon-icon *ngIf=" showPassword" classes="w-4 h-4 text-gray-600" name="eye-slash"></horizon-icon>
        </div>
      </div>
    } @else if (inputType !== "textarea") {
      <input
        (keyup)="updateValue($event)"
        [autocomplete]="autocomplete"
        [class.mb-1.5]="invalid"
        [disabled]="disabled"
        [id]="id"
        [name]="name || id"
        [ngClass]="classes"
        [placeholder]="placeholder"
        [step]="step"
        [type]="inputType"
        [value]="value"
        class="text-xs shadow-md disabled:cursor-not-allowed disabled:border-gray-200 disabled:bg-gray-200 disabled:text-gray-900 sm:text-sm" />
    } @else if (inputType === "textarea") {
      <textarea
        (keyup)="updateValue($event)"
        [class.mb-1.5]="invalid"
        [disabled]="disabled"
        [id]="id"
        [name]="name || id"
        [ngClass]="classes"
        [placeholder]="placeholder"
        [value]="value"
        class="text-xs shadow-md disabled:cursor-not-allowed disabled:border-gray-200 disabled:bg-gray-200 disabled:text-gray-900 sm:text-sm"
        rows="4"></textarea>
    }
  } @else {
    <p class="mb-3 ml-1 text-xs font-semibold text-black md:text-sm">{{ value ?? '--' }}</p>
  }
  @if (invalid) {
    <p class="text-xs text-red-600">
      <ng-content></ng-content>
    </p>
  }

</div>
